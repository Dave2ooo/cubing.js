<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf8" />
    <title>Twizzle Binary 3x3x3 Format</title>
    <link href="./index.css" rel="stylesheet" type="text/css" />
    <script src="./index.ts" defer></script>
  </head>

  <body>
    <h1>Twizzle Binary 3x3x3 Format</h1>
    Orientation and permutation is defined using the Reid-based definition
    used by <code>kpuzzle</code>. Permutations are encoded using lexicographic
    order. Orientations are encoded as numbers in base 2 (edges), 3 (corners), or 4 (centers).

    <section id="components">
      <h2>Components</h2>
      <ul>
        <li>
          <span class="componentName">EP</span>: edge permutation (0 to 12! - 1)
        </li>
        <li>
          <span class="componentName">CP</span>: corner permutation (0 to 8! - 1)
        </li>
        <li>
          <span class="componentName">EO</span>: edge orientation (0 to
          2<sup>12</sup>-1)
        </li>
        <li>
          <span class="componentName">CO</span>: corner orientation (0 to
          3<sup>8</sup>-1)
        </li>
        <li>
          <span class="componentName">MO</span>: center ("middle") orientation (0
          to 4<sup>6</sup>-1)
        </li>
        <li>
          <span class="componentName">MO?</span>: whether center orientation is
          supported (0 or 1)
        </li>
        <li>
          <span class="componentName">PO</span>: puzzle orientation. See <a href="#puzzle-orientation">below</a>.
        </li>
      </ul>
    </section>

    <section id="validation">
      <h2>Validation</h2>
      Note that this encoding includes the full state of each of these components,
      without relying on parity to save bits (except EO in the fixed-center format
      ).
      <ul>
        <li>
          For some applications, it is useful to be be able to encode "invalid"
          states.
        </li>
        <li>This allows encoders and decoders to be written more easily.</li>
        <li>This provides for a parity check.</li>
      </ul>
      Guidelines:
      <ul>
        <li>
          Applications SHOULD validate that each of the components are in the
          valid range.
        </li>
        <li>
          Applications MUST either 1) accept both formats, or 2) check that </span>
          </span>PO_U</span>
          has the expected value (0 to 5 if only the full format is supported,
          <code>0b111</code> if only the fixed-center format is supported).
        </li>
        <li>
          Applications MAY choose to validate parities (and reject encoded values
          with invalid parity) if this is important to their correctness.
        </li>
      </ul>
    </section>
    
    <div id="stub"></div>

    <section id="puzzle-orientation">
      <h1>Puzzle Orientation</h1>
      <ul>
        <li>
          <span class="componentName">PO_U</span>: The center on the U face is specified as
          a value from 0 to 5 (according to its original
          zero-indexed position in <code>ULFRBD</code>).
        </li>
        <li>
          <span class="componentName">PO_L</span>: The center on the L face is specified as
          a value from 0 to 3 (according to its original
          zero-indexed position in <code>ULFRBD</code>, <i>skipping</i> the centers currently
          on U and D).
        </li>
        </ul>
        <p>
          The other components are encoded relative to centers. That is, reorienting the puzzle changes <span
            class="componentName">PO_U</span> and <span class="componentName">PO_L</span>, but does not affect any other
          components.
        </p>
        <h3>Puzzle Orientation Example</h3>
        <p>
          Apply <code>z y'</code> to a solved cube. Now:
        </p>
        <ul>
          <li>The <code>L</code> center has moved to <code>U</code>.
            <ul>
            <li><code>L</code> is at (zero-indexed) position 1 in <code>ULFRBD</code>, so <span class="componentName">PO_U</span> = <code>1</code></li>
            </ul>
          </li>
          <li>The <code>B</code> center has moved to <code>L</code>.
            <ul>
              <li>The <code>L</code> and <code>R</code> centers are on <code>U</code> and <code>D</code> (respectively), so remove <code>L</code> and <code>R</code> from <code>ULFRBD</code> to get <code>UFBD</code>.</li>
              <li><code>B</code> is at (zero-indexed) position 2 in <code>UFBD</code>, so <span class="componentName">PO_L</span> =
                <code>2</code></li>
            </ul>
          </li>
        </ul>
        </section>
  </body>
</html>
