{
  "version": 3,
  "sources": ["../../src/stream/websocket-proxy.ts"],
  "sourcesContent": ["import { MoveEvent } from \"../bluetooth\";\nimport { OrientationEvent } from \"../bluetooth/bluetooth-puzzle\";\nimport { ProxyEvent } from \"./proxy-event\";\n\nexport class WebSocketProxySender {\n  protected websocket: WebSocket;\n  constructor(url: string) {\n    this.websocket = new WebSocket(url);\n    this.websocket.onopen = this.onopen.bind(this);\n    this.websocket.onerror = this.onerror.bind(this);\n    this.websocket.onmessage = this.onmessage.bind(this);\n  }\n\n  public sendMoveEvent(e: MoveEvent): void {\n    this.sendProxyEvent({\n      event: \"move\",\n      data: e,\n    });\n  }\n\n  public sendOrientationEvent(e: OrientationEvent): void {\n    this.sendProxyEvent({\n      event: \"orientation\",\n      data: e,\n    });\n  }\n\n  public sendResetEvent(): void {\n    this.sendProxyEvent({ event: \"reset\" });\n  }\n\n  protected sendProxyEvent(proxyEvent: ProxyEvent): void {\n    this.websocket.send(JSON.stringify(proxyEvent));\n  }\n\n  protected onopen(): void {\n    console.log(\"Sending socket is open!\");\n  }\n\n  protected onerror(error: Error): void {\n    console.error(\"WebSocket sender error:\", error);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars-experimental, @typescript-eslint/no-empty-function\n  protected onmessage(e: MessageEvent): void {}\n}\n\nexport abstract class WebSocketProxyReceiver {\n  protected websocket: WebSocket;\n  constructor(url: string, socketOrigin?: string) {\n    if (!socketOrigin) {\n      console.log(\"No socket origin specified. Will not attempt to connect.\");\n      return;\n    }\n    this.websocket = new WebSocket(url);\n    console.log(this.websocket);\n    this.websocket.onopen = this.onopen.bind(this);\n    this.websocket.onerror = this.onerror.bind(this);\n    this.websocket.onmessage = this.onmessage.bind(this);\n  }\n\n  protected onopen(): void {\n    console.log(\"Receiving socket is open!\");\n  }\n\n  protected onerror(error: Error): void {\n    console.error(\"WebSocket receiver error:\", error);\n  }\n\n  protected onmessage(e: MessageEvent): void {\n    this.onProxyEvent(JSON.parse(e.data));\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars-experimental\n  abstract onProxyEvent(e: ProxyEvent): void;\n}\n"],
  "mappings": ";AAAA;AAAA,EAME,YAAY;AACV,SAAK,YAAY,IAAI,UAAU;AAC/B,SAAK,UAAU,SAAS,KAAK,OAAO,KAAK;AACzC,SAAK,UAAU,UAAU,KAAK,QAAQ,KAAK;AAC3C,SAAK,UAAU,YAAY,KAAK,UAAU,KAAK;AAAA;AAAA,EAG1C;AACL,SAAK,eAAe;AAAA,MAClB,OAAO;AAAA,MACP,MAAM;AAAA;AAAA;AAAA,EAIH;AACL,SAAK,eAAe;AAAA,MAClB,OAAO;AAAA,MACP,MAAM;AAAA;AAAA;AAAA,EAIH;AACL,SAAK,eAAe,CAAE,OAAO;AAAA;AAAA,EAGrB;AACR,SAAK,UAAU,KAAK,KAAK,UAAU;AAAA;AAAA,EAG3B;AACR,YAAQ,IAAI;AAAA;AAAA,EAGJ;AACR,YAAQ,MAAM,2BAA2B;AAAA;AAAA,EAIjC;AAAA;AAAA;AA5CZ;AAAA,EAiDE;AACE,QAAI,CAAC;AACH,cAAQ,IAAI;AACZ;AAAA;AAEF,SAAK,YAAY,IAAI,UAAU;AAC/B,YAAQ,IAAI,KAAK;AACjB,SAAK,UAAU,SAAS,KAAK,OAAO,KAAK;AACzC,SAAK,UAAU,UAAU,KAAK,QAAQ,KAAK;AAC3C,SAAK,UAAU,YAAY,KAAK,UAAU,KAAK;AAAA;AAAA,EAGvC;AACR,YAAQ,IAAI;AAAA;AAAA,EAGJ;AACR,YAAQ,MAAM,6BAA6B;AAAA;AAAA,EAGnC;AACR,SAAK,aAAa,KAAK,MAAM,EAAE;AAAA;AAAA;",
  "names": []
}
